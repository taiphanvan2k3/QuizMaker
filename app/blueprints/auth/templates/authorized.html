<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Authorization Successful</title>
    <script>
        // Wait until the DOM is fully loaded
        document.addEventListener("DOMContentLoaded", function() {
            // Retrieve token and user_info from the server-side via Jinja2 templating
            const token = "{{ token }}";
            const userInfo = JSON.parse('{{ user_info | tojson | safe }}');

            // Save token and user_info into local storage
            localStorage.setItem('token', token);
            localStorage.setItem('userInfo', JSON.stringify(userInfo));

            // Redirect to homepage or another appropriate page
            window.location.href = '/';
        });
    </script>
</head>
<body>
</body>
</html>
